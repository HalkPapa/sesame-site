# Sesame Theme 完全カスタマイズガイド

このガイドでは、Sesame Themeを手動で調整・カスタマイズする方法と、トラブルが発生した際の対処方法を詳しく説明します。

---

## 目次

1. [テーマの構造](#テーマの構造)
2. [編集前の準備](#編集前の準備)
3. [カスタマイズ手順](#カスタマイズ手順)
4. [トラブルシューティング](#トラブルシューティング)
5. [バックアップと復元](#バックアップと復元)
6. [よくある質問](#よくある質問)

---

## テーマの構造

### ファイル一覧と役割

```
sesame-theme/
├── style.css                      ★ メインスタイルシート（デザイン全般）
├── functions.php                  ★ テーマの機能定義
├── header.php                     - ヘッダー部分
├── footer.php                     - フッター部分
├── index.php                      - トップページ
├── page.php                       - 一般固定ページ
│
├── template-concept.php           - Conceptページ
├── template-company.php           ★ Companyページ
├── template-work.php              ★ Workページ
├── template-contact.php           ★ Contactページ
├── template-privacy-policy.php    - プライバシーポリシーページ
│
├── single-works.php               ★ 実績詳細ページ
│
├── page-template-styles.css       - 固定ページ用スタイル
├── single-page-styles.css         - 個別ページ用スタイル
├── privacy-policy-styles.css      - プライバシーポリシー用スタイル
│
└── *.md                          - セットアップガイド（参考資料）

★ = よく編集するファイル
```

### 各ファイルの詳細

#### 1. style.css（最重要）
- **役割**: サイト全体のデザイン・レイアウトを制御
- **内容**: 
  - 色
  - フォントサイズ
  - 余白・間隔
  - レイアウト
  - アニメーション
- **編集頻度**: 高

#### 2. functions.php（重要）
- **役割**: テーマの機能を定義
- **内容**:
  - カスタム投稿タイプ（Works）の登録
  - メニュー機能
  - アイキャッチ画像の有効化
- **編集頻度**: 低（初期設定後は触らない）
- **注意**: 構文エラーがあるとサイト全体が停止するので慎重に

#### 3. template-*.php（重要）
- **役割**: 各ページの構造とコンテンツ
- **内容**: HTML構造、表示する情報
- **編集頻度**: 中

#### 4. header.php / footer.php
- **役割**: 全ページ共通のヘッダー・フッター
- **内容**: ロゴ、ナビゲーション、コピーライト
- **編集頻度**: 低

---

## 編集前の準備

### 1. バックアップの作成

#### 方法A: WordPressダッシュボードから

```
1. 外観 → テーマファイルエディター
2. 右側のファイル一覧から編集したいファイルを選択
3. すべての内容をコピーしてテキストエディタに保存
```

#### 方法B: FTPクライアントを使用

```
1. FTPソフト（FileZilla等）でサーバーに接続
2. /wp-content/themes/sesame-theme/ フォルダをダウンロード
3. ローカルに保存（日付を付けて保存推奨）
   例: sesame-theme_backup_20250125.zip
```

#### 方法C: 子テーマの作成（推奨）

```
1. /wp-content/themes/ に新しいフォルダを作成
   例: sesame-theme-child
2. style.css と functions.php を作成
3. 詳細は後述の「子テーマの作成」を参照
```

### 2. 必要なツール

- **テキストエディタ**: 
  - Visual Studio Code（推奨）
  - Sublime Text
  - Notepad++
  
- **FTPクライアント**（サーバー直接編集の場合）:
  - FileZilla
  - Cyberduck
  
- **ブラウザの開発者ツール**:
  - Chrome DevTools（F12キー）
  - Firefox Developer Tools

### 3. 安全な編集環境

#### ステージング環境の構築

本番環境で直接編集せず、テスト環境で確認してから適用します。

```
【理想的な手順】
1. ローカル環境またはステージングサイトで編集
2. 問題ないことを確認
3. 本番環境に適用
```

#### WordPressの編集画面を使う場合

```
外観 → テーマファイルエディター → 編集したいファイルを選択
```

⚠️ **注意**: WordPressエディターは保存前にバックアップが取れないため、必ず内容をコピーしてからから編集してください。

---

## カスタマイズ手順

### A. 色の変更

#### 1. ブランドカラーの変更

**対象ファイル**: `style.css`

```css
/* 現在のメインカラー: #5B9FBD（水色） */

/* 変更箇所を検索 */
#5B9FBD

/* 例: 赤色に変更する場合 */
#5B9FBD → #E74C3C
```

**主な使用箇所**:
- ロゴ（.site-title a）
- ナビゲーションのホバー効果
- ボタン
- リンク

#### 2. 背景色の変更

```css
/* ページ全体の背景 */
body {
    background-color: #fafafa; /* ここを変更 */
}

/* セクションの背景 */
.site-header {
    background: rgba(255, 255, 255, 0.98); /* ここを変更 */
}
```

#### 3. テキスト色の変更

```css
/* メインテキスト */
body {
    color: #333; /* ここを変更 */
}

/* 見出し */
.hero-title {
    color: #222; /* ここを変更 */
}
```

### B. フォントサイズの変更

#### 1. 基本フォントサイズ

**対象ファイル**: `style.css`

```css
body {
    font-size: 16px; /* ここを変更（推奨: 14-18px） */
}
```

#### 2. 見出しサイズ

```css
/* トップページの見出し */
.hero-title {
    font-size: 52px; /* ここを変更 */
}

/* Companyページの名前 */
.member-name {
    font-size: 32px; /* ここを変更 */
}

/* Workページのタイトル */
.work-title-single {
    font-size: 42px; /* ここを変更 */
}
```

#### 3. レスポンシブ対応

サイズ変更時は、レスポンシブ設定も調整してください：

```css
/* タブレット用 */
@media (max-width: 768px) {
    .hero-title {
        font-size: 36px; /* ここも変更 */
    }
}

/* スマートフォン用 */
@media (max-width: 480px) {
    .hero-title {
        font-size: 28px; /* ここも変更 */
    }
}
```

### C. 余白・間隔の調整

#### 1. セクション間の余白

```css
/* Companyページの例 */
.company-section {
    margin-bottom: 60px; /* ここを変更 */
}

/* メンバー間の余白 */
.member-item {
    margin-bottom: 40px; /* ここを変更 */
}
```

#### 2. コンテンツの余白

```css
/* メインコンテンツエリア */
.main-content {
    padding: 80px 60px 100px 120px; /* 上 右 下 左 */
}
```

#### 3. 行間（line-height）

```css
/* 通常テキスト */
body {
    line-height: 1.9; /* ここを変更（推奨: 1.4-2.0） */
}

/* 特定要素 */
.member-name {
    line-height: 1.4; /* ここを変更 */
}
```

### D. レイアウトの変更

#### 1. Workページのグリッド数

**対象ファイル**: `style.css`

```css
/* 3列から4列に変更 */
.work-grid {
    grid-template-columns: repeat(3, 1fr); /* 3を4に変更 */
}
```

#### 2. コンテンツ幅の変更

```css
/* メインコンテンツの最大幅 */
.main-content {
    max-width: 1200px; /* ここを変更 */
}

/* Contactフォームの幅 */
.contact-form-wrapper {
    max-width: 600px; /* ここを変更 */
}
```

### E. テキスト内容の変更

#### 1. Companyページの内容変更

**対象ファイル**: `template-company.php`

```php
<!-- 商号の変更 -->
<p class="company-text">合同会社sesame</p>
<!-- ↓ -->
<p class="company-text">株式会社〇〇〇</p>

<!-- メンバーの追加 -->
<div class="member-item">
    <p class="member-role">役職名</p>
    <p class="member-name">氏名</p>
</div>
```

#### 2. Conceptページの内容変更

**対象ファイル**: `template-concept.php`

```php
<h2 class="hero-title">想像の扉を開く。</h2>
<!-- タイトルを変更 -->

<div class="hero-text">
    <p>テキストを変更...</p>
</div>
```

#### 3. フッターの変更

**対象ファイル**: `footer.php`

```php
<p class="copyright">©2025 sesame G.K.</p>
<!-- 年や会社名を変更 -->
```

### F. 実績（Works）のカスタマイズ

#### 1. 表示件数の変更

**対象ファイル**: `template-work.php`

```php
$args = array(
    'post_type' => 'works',
    'posts_per_page' => -1, // -1 = すべて表示
    'orderby' => 'date',
    'order' => 'DESC'
);

// 6件まで表示する場合
'posts_per_page' => 6,
```

#### 2. カテゴリー追加

```
WordPress管理画面 → 実績 → 実績カテゴリー → 新規追加
```

### G. Contact Form 7のカスタマイズ

#### 1. フィールドの追加

**管理画面**: お問い合わせ → フォーム編集

```html
<!-- 会社名フィールドの追加 -->
<p>[text your-company placeholder "company name"]</p>
```

#### 2. フォームスタイルの変更

**対象ファイル**: `style.css`

```css
/* 入力フィールドのスタイル */
.wpcf7 input[type="text"] {
    padding: 15px 20px; /* 余白を変更 */
    font-size: 16px; /* フォントサイズを変更 */
    border: 1px solid #ddd; /* ボーダー色を変更 */
}

/* 送信ボタンのスタイル */
.wpcf7 input[type="submit"] {
    width: 200px; /* 幅を変更 */
    background: #fff; /* 背景色を変更 */
    color: #666; /* 文字色を変更 */
}
```

---

## トラブルシューティング

### 問題1: サイトが真っ白になった

**原因**: PHPファイルの構文エラー

**対処法**:

#### 方法A: FTPで修正
```
1. FTPクライアントでサーバーに接続
2. 問題のファイルを削除または上書き
3. バックアップファイルで復元
```

#### 方法B: ファイルマネージャーで修正
```
1. サーバーのコントロールパネルにログイン
2. ファイルマネージャーを開く
3. /wp-content/themes/sesame-theme/ に移動
4. 問題のファイルを編集または削除
```

#### 方法C: テーマを一時的に無効化
```
1. FTPで /wp-content/themes/ にアクセス
2. sesame-theme フォルダ名を変更
   例: sesame-theme_backup
3. WordPressがデフォルトテーマに自動切替
4. 管理画面にログインしてテーマを修正
```

### 問題2: レイアウトが崩れた

**原因**: CSSの記述ミス

**対処法**:

#### 1. ブラウザのキャッシュをクリア
```
Chrome: Ctrl + Shift + Delete
Firefox: Ctrl + Shift + Delete
Safari: Cmd + Option + E
```

#### 2. CSS構文チェック
```
- 閉じ括弧 } が不足していないか
- セミコロン ; が不足していないか
- プロパティ名のスペルミスがないか
```

#### 3. 開発者ツールで確認
```
F12キーを押す → Elements/Inspector タブ → 問題の要素を選択
→ Styles パネルで適用されているCSSを確認
```

#### 4. バックアップから復元
```
style.css を編集前のバージョンで上書き
```

### 問題3: 実績が表示されない

**原因**: パーマリンク設定の未更新

**対処法**:
```
設定 → パーマリンク → 変更を保存（何も変更しなくてOK）
```

### 問題4: フォームが送信できない

**原因**: Contact Form 7の設定ミス

**対処法**:

#### 1. プラグインの確認
```
プラグイン → インストール済みプラグイン
→ Contact Form 7 が有効化されているか確認
```

#### 2. フォーム設定の確認
```
お問い合わせ → フォーム一覧 → 編集
→ フォームタブで構文エラーがないか確認
```

#### 3. メール設定の確認
```
メールタブ → 送信先アドレスが正しいか確認
```

### 問題5: 画像が表示されない

**原因**: 
- 画像パスの間違い
- アイキャッチ画像の未設定
- パーミッション問題

**対処法**:

#### 1. アイキャッチ画像の確認
```
投稿編集画面 → 右サイドバー → 実績画像を設定
```

#### 2. アップロードフォルダのパーミッション
```
/wp-content/uploads/ のパーミッション: 755
画像ファイルのパーミッション: 644
```

#### 3. 画像の再アップロード
```
メディア → 新規追加 → 画像を再アップロード
```

### 問題6: メニューが表示されない

**原因**: メニューの未設定

**対処法**:
```
1. 外観 → メニュー
2. 新しいメニューを作成
3. ページを追加
4. メニューの位置: "Primary Menu" を選択
5. メニューを保存
```

### 問題7: 文字化けが発生

**原因**: 文字コードの不一致

**対処法**:

#### 1. ファイルをUTF-8で保存
```
エディタで開く → 名前を付けて保存 → エンコーディング: UTF-8（BOMなし）
```

#### 2. データベースの文字コード確認
```
phpMyAdmin → データベース選択 → 照合順序: utf8mb4_general_ci
```

### 問題8: 編集が反映されない

**原因**: キャッシュの問題

**対処法**:

#### 1. ブラウザキャッシュのクリア
```
前述の方法でキャッシュクリア
```

#### 2. WordPressキャッシュプラグインのクリア
```
プラグインによって異なる
例: WP Super Cache → Delete Cache
```

#### 3. サーバーキャッシュのクリア
```
サーバーのコントロールパネルから
CDNを使用している場合はCDNのキャッシュもクリア
```

#### 4. ハードリロード
```
Chrome/Firefox: Ctrl + Shift + R
Mac: Cmd + Shift + R
```

---

## バックアップと復元

### 定期バックアップの重要性

編集前には必ずバックアップを取りましょう。

### バックアップ方法

#### 方法1: 手動バックアップ

```
1. FTPでサーバーに接続
2. /wp-content/themes/sesame-theme/ をダウンロード
3. 日付を付けて保存
   例: sesame-theme_backup_2025-01-25.zip
```

#### 方法2: プラグインを使用

おすすめプラグイン:
- **UpdraftPlus**: 自動バックアップ＋クラウド保存
- **BackWPup**: スケジュールバックアップ
- **Duplicator**: サイト全体の複製

### 復元方法

#### テーマファイルの復元

```
1. FTPでサーバーに接続
2. /wp-content/themes/sesame-theme/ を削除
3. バックアップから復元
4. ブラウザのキャッシュをクリア
5. 動作確認
```

#### 特定ファイルのみ復元

```
1. 問題のファイル（例: style.css）のみを削除
2. バックアップから該当ファイルをアップロード
3. 動作確認
```

### 緊急時の対応

#### サイトがダウンした場合

```
【優先順位】
1. テーマをデフォルトに戻す（Twenty Twenty-Four等）
2. サイト復旧を確認
3. sesame-theme をバックアップから復元
4. 問題の原因を特定
5. 修正して再度有効化
```

---

## 子テーマの作成（推奨）

親テーマを直接編集せず、子テーマを作成することで、テーマ更新時に変更が失われません。

### 子テーマの作成手順

#### 1. フォルダの作成

```
/wp-content/themes/ に新しいフォルダを作成
フォルダ名: sesame-theme-child
```

#### 2. style.css の作成

`/wp-content/themes/sesame-theme-child/style.css` を作成：

```css
/*
Theme Name: Sesame Theme Child
Template: sesame-theme
Description: Sesame Themeの子テーマ
Version: 1.0
*/

/* ここにカスタムCSSを記述 */

/* 例: メインカラーを変更 */
.site-title a {
    color: #E74C3C !important;
}
```

#### 3. functions.php の作成

`/wp-content/themes/sesame-theme-child/functions.php` を作成：

```php
<?php
/**
 * Sesame Theme Child Functions
 */

// 親テーマのスタイルを読み込む
function sesame_child_enqueue_styles() {
    wp_enqueue_style('parent-style', get_template_directory_uri() . '/style.css');
    wp_enqueue_style('child-style', get_stylesheet_uri(), array('parent-style'));
}
add_action('wp_enqueue_scripts', 'sesame_child_enqueue_styles');
```

#### 4. 子テーマを有効化

```
WordPress管理画面 → 外観 → テーマ
→ Sesame Theme Child を有効化
```

### 子テーマでのカスタマイズ

#### CSSの上書き

子テーマの `style.css` に記述：

```css
/* 親テーマのスタイルを上書き */
.hero-title {
    font-size: 60px !important;
    color: #E74C3C !important;
}
```

#### テンプレートファイルの上書き

親テーマのファイルを子テーマにコピーして編集：

```
sesame-theme/template-company.php
↓ コピー
sesame-theme-child/template-company.php
↓ 編集
```

---

## よくある質問

### Q1: どのファイルを編集すればいいかわからない

**A**: 編集内容によって異なります：

| 編集内容 | ファイル |
|---------|---------|
| 色・フォント・余白 | style.css |
| ページの内容・構造 | template-*.php |
| 機能の追加・変更 | functions.php |
| ヘッダー・フッター | header.php / footer.php |

### Q2: 編集後、サイトが表示されない

**A**: 以下を試してください：

1. ブラウザのキャッシュをクリア
2. ハードリロード（Ctrl+Shift+R）
3. FTPでバックアップから復元
4. テーマを一時的に無効化

### Q3: CSSが反映されない

**A**: 以下の順で確認：

1. ブラウザキャッシュをクリア
2. 構文エラーがないか確認（閉じ括弧、セミコロン）
3. セレクタが正しいか確認
4. !important を追加してみる
5. キャッシュプラグインをクリア

### Q4: 編集内容が消えた

**A**: 原因と対処：

- **テーマ更新**: 子テーマを使用する
- **サーバー障害**: バックアップから復元
- **誤操作**: バックアップから復元

### Q5: 安全に編集するには？

**A**: 以下を守りましょう：

1. 必ずバックアップを取る
2. 子テーマを使用する
3. 本番環境で直接編集しない
4. 1つずつ変更して確認する
5. コメントアウトで元のコードを残す

### Q6: エラーメッセージが出た

**A**: エラー内容によって対処が異なります：

| エラー | 原因 | 対処 |
|-------|------|------|
| Parse error | PHP構文エラー | バックアップから復元 |
| Fatal error | 関数の重複定義 | functions.php を確認 |
| 404 Error | パーマリンク | 設定→パーマリンクを再保存 |
| 500 Error | サーバーエラー | エラーログを確認 |

### Q7: どこまでカスタマイズできる？

**A**: ほぼすべてカスタマイズ可能ですが：

- **簡単**: 色、フォント、余白、テキスト内容
- **中級**: レイアウト変更、セクション追加
- **上級**: 機能追加、PHPロジック変更

### Q8: バックアップはどこに保存すべき？

**A**: 複数箇所に保存が理想：

1. ローカルPC
2. クラウドストレージ（Google Drive、Dropbox等）
3. 外付けHDD
4. 別のサーバー

### Q9: 編集に失敗したらどうすれば？

**A**: 冷静に以下を実行：

1. パニックにならない
2. 変更を加えたファイルをメモ
3. バックアップから復元
4. 動作確認
5. 再度慎重に編集

### Q10: 専門知識がなくても大丈夫？

**A**: 基本的な編集は可能ですが：

- **HTML/CSS基礎**: 学習を推奨
- **PHP基礎**: 高度な編集に必要
- **WordPress基礎**: 管理画面の使い方を習得

オンライン学習リソース:
- Progate（HTML/CSS/PHP）
- ドットインストール
- YouTube チュートリアル

---

## 編集のベストプラクティス

### 1. 小さく始める

一度に大きな変更をせず、1つずつ変更して確認しましょう。

### 2. コメントを残す

```css
/* 2025-01-25: メインカラーを赤に変更 */
.site-title a {
    color: #E74C3C;
}
```

### 3. 元のコードをコメントアウト

```css
/* 元の色
.site-title a {
    color: #5B9FBD;
}
*/

/* 新しい色 */
.site-title a {
    color: #E74C3C;
}
```

### 4. バージョン管理

- 編集のたびにバックアップを取る
- ファイル名に日付を付ける
- 変更履歴をメモする

### 5. テスト環境で確認

本番環境で直接編集せず、必ずテスト環境で確認してから適用しましょう。

---

## サポート情報

### 追加のヘルプが必要な場合

1. **ドキュメントを確認**
   - 同梱されている各種 .md ファイルを参照

2. **WordPress Codex**
   - 公式ドキュメント: https://codex.wordpress.org/

3. **コミュニティフォーラム**
   - WordPress.org フォーラム
   - Stack Overflow

4. **プロフェッショナルサポート**
   - WordPress開発者に依頼
   - フリーランスプラットフォーム（ココナラ、ランサーズ等）

---

## まとめ

このガイドを参考に、安全かつ効果的にテーマをカスタマイズしてください。

**重要なポイント**:
1. ✅ 必ずバックアップを取る
2. ✅ 子テーマを使用する
3. ✅ 小さく変更して確認
4. ✅ トラブル時は冷静に対処
5. ✅ わからないことは調べる

Happy Customizing! 🎨
